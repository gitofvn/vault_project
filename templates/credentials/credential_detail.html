{% extends 'base.html' %}
{% block title %}{{ credential.site_name }}{% endblock %}

{% block layout %}
<div class="dashboard-wrapper">
  {% include 'common/base_navigation.html' %}

  <main class="dashboard-main">
    <div class="form-container">
      <!-- Title -->
      <h2 class="form-title">
        {% if credential.site_url %}
          <img src="https://www.google.com/s2/favicons?sz=32&domain={{ credential.site_url }}"
               alt="favicon" style="width:28px; height:28px; margin-right:8px; vertical-align:middle; display:inline-block;">
        {% endif %}
        {{ credential.site_name }}
      </h2>

      <hr class="notes-separator">

      <!-- Same grid layout as edit -->
      <form class="note-form">
        <div class="edit-grid">
          <!-- LEFT COLUMN -->
          <div class="col-left">
            <!-- Categories -->
            {% if credential.categories.all %}
              <div class="input-group">
                <label>Categories</label>
                <div class="credential-categories" style="border:none; background:transparent; padding:0; max-height:none; overflow:visible;">
                  {% for cat in credential.categories.all %}
                    <span class="category-badge">{{ cat.name }}</span>
                  {% empty %}
                    <span class="category-badge category-badge--empty">None</span>
                  {% endfor %}
                </div>
              </div>
            {% endif %}

            <!-- Site Name -->
            <div class="input-group">
              <label>Site name</label>
              <input type="text" value="{{ credential.site_name }}" readonly class="textinput textInput">
            </div>

            <!-- Username -->
            <div class="input-group">
              <label>Username</label>
              <input type="text" value="{{ credential.username }}" readonly class="textinput textInput">
            </div>

            <!-- Email -->
            {% if credential.email %}
            <div class="input-group">
              <label>Email</label>
              <input type="text" value="{{ credential.email }}" readonly class="textinput textInput">
            </div>
            {% endif %}

            <!-- Password -->
            <div class="input-group">
              <label>Password</label>
              <input type="text" value="{{ decrypted_password }}" readonly class="textinput textInput">
            </div>
          </div>

          <!-- RIGHT COLUMN -->
          <div class="col-right">
            <!-- Phone Number -->
            {% if credential.phone_number %}
            <div class="input-group">
              <label>Phone number</label>
              <input type="text" value="{{ credential.phone_number }}" readonly class="textinput textInput">
            </div>
            {% endif %}

            <!-- Other -->
            {% if credential.other %}
            <div class="input-group">
              <label>Other</label>
              <input type="text" value="{{ credential.other }}" readonly class="textinput textInput">
            </div>
            {% endif %}

            <!-- Site URL -->
            {% if credential.site_url %}
            <div class="input-group">
              <label>Site URL</label>
              <input type="text" value="{{ credential.site_url }}" readonly class="textinput textInput">
            </div>
            {% endif %}
          </div>
        </div>
      </form>

      <hr class="notes-separator">

      <!-- Actions -->
      <div class="note-actions edit-actions">
        <a href="{% url 'credential-edit' credential.pk %}" class="note-btn">Edit</a>
        <a href="{% url 'credential-delete' credential.pk %}" class="note-btn">Delete</a>
        <a href="{% url 'credential-list' %}" class="note-btn">Back to Credentials</a>
      </div>
    </div>
  </main>
</div>
{% endblock %}
